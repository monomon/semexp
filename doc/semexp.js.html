<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: semexp.js</title>
    
    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">
    
    <h1 class="page-title">Source: semexp.js</h1>
    
    


    
    <section>
        <article>
            <pre class="prettyprint source"><code>/*
@summary
Semantic explorer
an experiment in navigating semantic networks

* display a semantic network in a graph (force-directed layout)
* allow arbitrary filters on the data - select from a menu

@todo
* filter nodes and then links?
* add tools for manipulating the data, e.g.:
	* add node - enter node details, name at a minimum
	* add link - perhaps choose from a dropdown with limited options, e.g. relations that have already been defined in the model
	* modify node
* extend the database class:
	* be able to add more data on a node (might be possible already?), e.g. an object or map
	* implement loading and saving directly inside the semnet class; push changes upstream
*/

(function(semexp) {
	'use strict';

	/**
	 * @lends semexp
	 */	
	semexp = {
		/**
		 * initialize submodules and svg context
		 * @param {Object} config
		 * @constructs
		 */
		init : function(config)
		{
			this.graph = Object.create(semexp.graph, {
				explorer : { value : this }
			});
			this.tools = Object.create(semexp.tools, {
				explorer : { value : this }
			});
			this.menu = Object.create(semexp.menu, {
				explorer : { value : this }
			});

			this.model = Object.create(semexp.model, {
				explorer : { value : this }
			});


			var body = d3.select('body');
			this.svg = d3.select('body').append('svg')
				.attr('width', body.property('clientWidth'))
				.attr('height', body.property('clientHeight'));
		},

		addNode : function(nodeId)
		{
			this.model.add(nodeId);
			var menuData = this.menu.getData();
			// add default fact
			if (menuData.defaultFactRelation && menuData.defaultFactEntity) {
				this.model.fact(nodeId, menuData.defaultFactRelation, menuData.defaultFactEntity);
			}
			this.tools.setData('fromNode', null);
			this.refresh();
		},

		addRelation : function(relName, options)
		{
			this.model.add(relName, options);
			this.refresh();
		},

		/**
		 * Add a link between two nodes
		 * @param {String} from id of the source node
		 * @param {String} link id of the relation to use
		 * @param {String} to id of the target node
		 */
		addLink : function(from, link, to)
		{
			if (from == to) {
				return;
			}

			this.model.fact(from, link, to);
			this.tools.setData('fromNode', null);
			// append link to the data?
			this.refresh();
		},

		/**
		 * Remove a node from the graph
		 * @param {String} nodeId node 
		 */
		removeNode : function(nodeId)
		{
			console.log(nodeId);
		},

		/**
		 * Refresh the view - call refresh on all components
		 */
		refresh : function()
		{
			// this hooks the tick handler; perhaps move elsewhere
			this.menu.refresh();
			this.graph.refresh(this.model.generateGraph(), [this.tools]);
			this.tools.refresh();
		},

		/**
		 * Draw - call draw on all components
		 */
		draw : function()
		{
			// clean svg
			// this.svg.selectAll('*').remove();
			this.menu.draw();
			this.graph.draw(
				this.model.generateGraph(),
				this.svg,
				[this.tools],
				this.menu.getData());
			this.tools.draw(this.svg);
		},

		/**
		 * Save data
		 */
		save : function()
		{
			return this.model.export();
		},

		/**
		 * Load data and draw view
		 * @param {Object} data
		 */
		load : function(data)
		{
			this.model.loadData(data);
			this.draw();
		},

		/**
		 * Clear the graph
		 */
		clear : function(data)
		{
			this.graph.clear();
		}
	};

	window.semexp = semexp;
}(window.semexp || {}));</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Index</a></h2><h3>Classes</h3><ul><li><a href="semexp.html">semexp</a></li><li><a href="semexp.graph.html">graph</a></li><li><a href="semexp.menu.html">menu</a></li><li><a href="semexp.model.html">model</a></li><li><a href="semexp.tools.html">tools</a></li></ul>
</nav>

<br clear="both">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.2.2</a> on Thu May 14 2015 13:21:54 GMT+0200 (CEST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
